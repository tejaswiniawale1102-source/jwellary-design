{% extends 'base.html' %}

{% block title %}My Wishlist - RentEasyIndia{% endblock %}

{% block content %}
<div class="wishlist-page-container">
    <h2 style="text-align:center; margin-bottom:40px; font-size: 2.5rem; font-family: 'Playball', cursive;">Your
        Favorites ❤️</h2>

    {% if items and items|length > 0 %}
    <div class="wishlist-premium-grid">
        {% for item in items %}
        <div class="product-card glass-card reveal"
            style="padding: 15px; border-radius: 20px; overflow: hidden; position: relative; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
            <div style="position: relative; overflow: hidden; border-radius: 15px;">
                <div class="remove-wish" onclick="removeFromWishlist('{{ item[3] }}')"
                    style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #ff1f6a; z-index: 5; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                    <i class="fa-solid fa-heart-crack"></i>
                </div>
                <img src="{{ item[2] }}" style="width: 100%; height: 260px; object-fit: cover; border-radius: 12px;">
            </div>

            <div style="padding: 15px 5px 5px; text-align: left;">
                <h3 style="font-size: 1.1rem; margin-bottom: 8px; color: #333; font-weight: 600; min-height: 2.6rem;">{{
                    item[0] }}</h3>
                <div class="price" style="font-size: 1.2rem; color: #ff1f6a; font-weight: 700; margin-bottom: 15px;">
                    ₹{{ item[1] }} <span style="font-size: 0.8rem; color: #888; font-weight: normal;">/ day</span>
                </div>

                <a href="{{ url_for('products.product_detail', product_id=item[3]) }}" class="rent-btn"
                    style="width: 100%; text-decoration: none; display: block; text-align: center; background: #ff1f6a; color: white; padding: 10px; border-radius: 8px; font-weight: 600; transition: 0.3s;">
                    Rent Now
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align:center; padding:80px; color: #888;">
        <i class="fa-solid fa-heart-circle-plus" style="font-size: 4rem; opacity: 0.2; margin-bottom: 20px;"></i>
        <h3>Your wishlist is feeling lonely...</h3>
        <p>Explore our premium collections and find something you love!</p>
        <a href="{{ url_for('products.home') }}" class="rent-btn"
            style="text-decoration:none; margin-top:30px; display:inline-block; padding: 12px 35px; background: #ff1f6a; color: white; border-radius: 8px;">Browse
            Collections</a>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
    function removeFromWishlist(id) {
        fetch('/toggle-wishlist', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ product_id: id })
        })
            .then(response => response.json())
            .then(data => {
                location.reload();
            });
    }
</script>
{% endblock %}