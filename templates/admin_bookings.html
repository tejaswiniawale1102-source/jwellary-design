<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Bookings - Admin</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>

<body>

    {% include 'navbar.html' %}

    <section style="padding: 60px 40px;">

        <h2 style="text-align:center; margin-bottom:30px;">
            All Bookings (Till Now) üìÖ
        </h2>

        {% if bookings and bookings|length > 0 %}

        <table style="width:100%; border-collapse: collapse; background:white; box-shadow:0 5px 15px rgba(0,0,0,0.1);">
            <thead style="background:#8b2c4a; color:white;">
                <tr>
                    <th style="padding:12px;">ID</th>
                    <th style="padding:12px;">Customer</th>
                    <th style="padding:12px;">Product ID</th>
                    <th style="padding:12px;">Product Name</th>
                    <th style="padding:12px;">Total Price</th>
                    <th style="padding:12px;">Rent Date</th>
                    <th style="padding:12px;">Return Date</th>
                    <th style="padding:12px;">Status & Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for booking in bookings %}
                <tr style="text-align:center; border-bottom:1px solid #ddd;">
                    <td style="padding:10px;">#{{ booking[0] }}</td> <!-- ID -->
                    <td style="padding:10px; font-weight:bold;">{{ booking[1] }}</td> <!-- Customer Name -->
                    <td style="padding:10px; color:#555;">#{{ booking[7] }}</td> <!-- Product ID -->
                    <td style="padding:10px;">{{ booking[2] }}</td> <!-- Product Name -->
                    <td style="padding:10px;">‚Çπ{{ booking[3] }}</td> <!-- Total Price -->
                    <td style="padding:10px;">{{ booking[4] }}</td> <!-- Rent Date -->
                    <td style="padding:10px;">{{ booking[5] }}</td> <!-- Return Date -->
                    <td style="padding:10px; display:flex; flex-direction:column; gap:5px; align-items:center;">
                        <span
                            style="background:{% if booking[6] == 'Confirmed' %}#e6fffa{% elif booking[6] == 'Cancelled' %}#fff5f5{% elif booking[6] == 'Returned' %}#e8f5e9{% else %}#eee{% endif %}; 
                                   color:{% if booking[6] == 'Confirmed' %}#00b894{% elif booking[6] == 'Cancelled' %}#fc8181{% elif booking[6] == 'Returned' %}#4caf50{% else %}#636e72{% endif %}; 
                                   padding:5px 10px; border-radius:15px; font-size:14px; display:inline-block; margin-bottom:5px;">
                            {{ booking[6] }} <!-- Status -->
                        </span>

                        <div style="display:flex; gap:5px;">
                            {% if booking[6] == 'Confirmed' %}
                            <form action="{{ url_for('admin.mark_returned', booking_id=booking[0]) }}" method="POST">
                                <button type="submit" title="Mark Returned"
                                    style="background:#6c5ce7; color:white; border:none; padding:5px; border-radius:5px; cursor:pointer;">
                                    ‚Ü©Ô∏è
                                </button>
                            </form>

                            <form action="{{ url_for('admin.cancel_booking_admin', booking_id=booking[0]) }}"
                                method="POST">
                                <button type="submit" title="Cancel Booking"
                                    style="background:#ff9f43; color:white; border:none; padding:5px; border-radius:5px; cursor:pointer;">
                                    üö´
                                </button>
                            </form>
                            {% endif %}

                            <form action="{{ url_for('admin.delete_booking_admin', booking_id=booking[0]) }}"
                                method="POST"
                                onsubmit="return confirm('Are you sure you want to delete this booking permanently?');">
                                <button type="submit" title="Delete Permanently"
                                    style="background:#ff6b6b; color:white; border:none; padding:5px; border-radius:5px; cursor:pointer;">
                                    üóëÔ∏è
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {% else %}

        <div
            style="text-align:center; padding:40px; background:white; box-shadow:0 5px 15px rgba(0,0,0,0.1); border-radius:10px;">
            <h3>No bookings found!</h3>
        </div>

        {% endif %}

        <div style="text-align:center; margin-top:20px;">
            <a href="{{ url_for('admin.admin_dashboard') }}" class="list-btn"
                style="background:#ff1f6a; color:white; padding:10px 20px; text-decoration:none; border-radius:5px; display:inline-block;">Back
                to Dashboard</a>
        </div>

    </section>

    {% include 'footer.html' %}
</body>

</html>